Feb-01 11:16:32.782 [main] DEBUG nextflow.cli.Launcher - $> nextflow run orthologymap.nf -c /home/rgrindle/ortho_prediction/test_cloud_configs/batch.config -with-tower -profile docker -resume
Feb-01 11:16:33.061 [main] INFO  nextflow.cli.CmdRun - N E X T F L O W  ~  version 23.04.3
Feb-01 11:16:33.085 [main] DEBUG nextflow.plugin.PluginsFacade - Setting up plugin manager > mode=prod; embedded=false; plugins-dir=/home/rgrindle/.nextflow/plugins; core-plugins: nf-amazon@1.16.2,nf-azure@1.0.1,nf-codecommit@0.1.4,nf-console@1.0.5,nf-ga4gh@1.0.5,nf-google@1.7.3,nf-tower@1.5.12,nf-wave@0.8.4
Feb-01 11:16:33.110 [main] INFO  org.pf4j.DefaultPluginStatusProvider - Enabled plugins: []
Feb-01 11:16:33.111 [main] INFO  org.pf4j.DefaultPluginStatusProvider - Disabled plugins: []
Feb-01 11:16:33.115 [main] INFO  org.pf4j.DefaultPluginManager - PF4J version 3.4.1 in 'deployment' mode
Feb-01 11:16:33.128 [main] INFO  org.pf4j.AbstractPluginManager - No plugins
Feb-01 11:16:33.146 [main] DEBUG nextflow.config.ConfigBuilder - Found config local: /compbio/scratch/rgrindle/Ortho_Pipeline/orthologymap/workflows/nextflow.config
Feb-01 11:16:33.150 [main] DEBUG nextflow.config.ConfigBuilder - User config file: /home/rgrindle/ortho_prediction/test_cloud_configs/batch.config
Feb-01 11:16:33.150 [main] DEBUG nextflow.config.ConfigBuilder - Parsing config file: /compbio/scratch/rgrindle/Ortho_Pipeline/orthologymap/workflows/nextflow.config
Feb-01 11:16:33.151 [main] DEBUG nextflow.config.ConfigBuilder - Parsing config file: /home/rgrindle/ortho_prediction/test_cloud_configs/batch.config
Feb-01 11:16:33.177 [main] DEBUG nextflow.config.ConfigBuilder - Applying config profile: `docker`
Feb-01 11:16:34.083 [main] DEBUG nextflow.config.ConfigBuilder - Applying config profile: `docker`
Feb-01 11:16:34.273 [main] DEBUG nextflow.config.ConfigBuilder - Available config profiles: [docker]
Feb-01 11:16:34.322 [main] DEBUG nextflow.cli.CmdRun - Applied DSL=2 by global default
Feb-01 11:16:34.346 [main] INFO  nextflow.cli.CmdRun - Launching `orthologymap.nf` [sick_hopper] DSL2 - revision: b099260c06
Feb-01 11:16:34.347 [main] DEBUG nextflow.plugin.PluginsFacade - Plugins default=[nf-amazon@1.16.2]
Feb-01 11:16:34.348 [main] DEBUG nextflow.plugin.PluginsFacade - Plugins resolved requirement=[nf-amazon@1.16.2, nf-tower@1.5.12]
Feb-01 11:16:34.348 [main] DEBUG nextflow.plugin.PluginUpdater - Installing plugin nf-amazon version: 1.16.2
Feb-01 11:16:34.373 [main] INFO  org.pf4j.AbstractPluginManager - Plugin 'nf-amazon@1.16.2' resolved
Feb-01 11:16:34.374 [main] INFO  org.pf4j.AbstractPluginManager - Start plugin 'nf-amazon@1.16.2'
Feb-01 11:16:34.402 [main] DEBUG nextflow.plugin.BasePlugin - Plugin started nf-amazon@1.16.2
Feb-01 11:16:34.440 [main] DEBUG nextflow.file.FileHelper - > Added 'S3FileSystemProvider' to list of installed providers [s3]
Feb-01 11:16:34.440 [main] DEBUG nextflow.plugin.PluginUpdater - Installing plugin nf-tower version: 1.5.12
Feb-01 11:16:34.448 [main] INFO  org.pf4j.AbstractPluginManager - Plugin 'nf-tower@1.5.12' resolved
Feb-01 11:16:34.448 [main] INFO  org.pf4j.AbstractPluginManager - Start plugin 'nf-tower@1.5.12'
Feb-01 11:16:34.463 [main] DEBUG nextflow.plugin.BasePlugin - Plugin started nf-tower@1.5.12
Feb-01 11:16:34.489 [main] DEBUG nextflow.secret.LocalSecretsProvider - Secrets store: /home/rgrindle/.nextflow/secrets/store.json
Feb-01 11:16:34.494 [main] DEBUG nextflow.secret.SecretsLoader - Discovered secrets providers: [nextflow.secret.LocalSecretsProvider@3f1a4795] - activable => nextflow.secret.LocalSecretsProvider@3f1a4795
Feb-01 11:16:34.586 [main] DEBUG nextflow.Session - Session UUID: 36b433fe-b123-4743-9245-7ddfbde5bea9
Feb-01 11:16:34.586 [main] DEBUG nextflow.Session - Run name: sick_hopper
Feb-01 11:16:34.587 [main] DEBUG nextflow.Session - Executor pool size: 16
Feb-01 11:16:34.608 [main] DEBUG nextflow.file.FileHelper - Creating a file system instance for provider: S3FileSystemProvider
Feb-01 11:16:34.619 [main] DEBUG nextflow.Global - Using AWS credentials defined in nextflow config file
Feb-01 11:16:34.621 [main] DEBUG nextflow.file.FileHelper - AWS S3 config details: {secret_key=HDeqVm.., region=us-east-1, max_error_retry=5, access_key=AKIAQF..}
Feb-01 11:16:35.219 [main] DEBUG com.upplication.s3fs.AmazonS3Client - Setting S3 glacierRetrievalTier=null
Feb-01 11:16:35.257 [main] DEBUG nextflow.util.ThreadPoolBuilder - Creating thread pool 'FileTransfer' minSize=10; maxSize=48; workQueue=LinkedBlockingQueue[10000]; allowCoreThreadTimeout=false
Feb-01 11:16:35.263 [main] DEBUG nextflow.config.ConfigBuilder - Found config local: /compbio/scratch/rgrindle/Ortho_Pipeline/orthologymap/workflows/nextflow.config
Feb-01 11:16:35.263 [main] DEBUG nextflow.config.ConfigBuilder - User config file: /home/rgrindle/ortho_prediction/test_cloud_configs/batch.config
Feb-01 11:16:35.263 [main] DEBUG nextflow.config.ConfigBuilder - Parsing config file: /compbio/scratch/rgrindle/Ortho_Pipeline/orthologymap/workflows/nextflow.config
Feb-01 11:16:35.263 [main] DEBUG nextflow.config.ConfigBuilder - Parsing config file: /home/rgrindle/ortho_prediction/test_cloud_configs/batch.config
Feb-01 11:16:35.264 [main] DEBUG nextflow.config.ConfigBuilder - Applying config profile: `docker`
Feb-01 11:16:35.346 [main] DEBUG nextflow.config.ConfigBuilder - Applying config profile: `docker`
Feb-01 11:16:35.409 [main] DEBUG nextflow.config.ConfigBuilder - Available config profiles: [docker]
Feb-01 11:16:35.435 [main] DEBUG nextflow.cli.CmdRun - 
  Version: 23.04.3 build 5875
  Created: 11-08-2023 18:37 UTC (14:37 EDT)
  System: Linux 4.18.0-372.9.1.el8.x86_64
  Runtime: Groovy 3.0.16 on Java HotSpot(TM) 64-Bit Server VM 17.0.6+9-LTS-190
  Encoding: UTF-8 (UTF-8)
  Process: 4189138@random.mdibl.net [209.222.195.242]
  CPUs: 16 - Mem: 141.4 GB (63 GB) - Swap: 32 MB (0)
Feb-01 11:16:35.991 [main] DEBUG nextflow.file.FileHelper - Can't check if specified path is NFS (1): s3://mdibl-rgrindle/orthology_pipe/work_dirs/batch_test

Feb-01 11:16:35.991 [main] DEBUG nextflow.Session - Work-dir: s3://mdibl-rgrindle/orthology_pipe/work_dirs/batch_test [null]
Feb-01 11:16:35.991 [main] DEBUG nextflow.Session - Script base path does not exist or is not a directory: /compbio/scratch/rgrindle/Ortho_Pipeline/orthologymap/workflows/bin
Feb-01 11:16:36.023 [main] DEBUG nextflow.executor.ExecutorFactory - Extension executors providers=[AwsBatchExecutor]
Feb-01 11:16:36.039 [main] DEBUG nextflow.Session - Observer factory: DefaultObserverFactory
Feb-01 11:16:36.042 [main] DEBUG nextflow.Session - Observer factory: TowerFactory
Feb-01 11:16:36.153 [main] DEBUG nextflow.cache.CacheFactory - Using Nextflow cache factory: nextflow.cache.DefaultCacheFactory
Feb-01 11:16:36.165 [main] DEBUG nextflow.util.CustomThreadPool - Creating default thread pool > poolSize: 17; maxThreads: 1000
Feb-01 11:16:36.304 [main] DEBUG nextflow.Session - Session start
Feb-01 11:16:36.315 [main] DEBUG io.seqera.tower.plugin.TowerClient - Creating Tower observer -- endpoint=https://api.tower.nf; requestInterval=1s; aliveInterval=1m; maxRetries=5; backOffBase=3; backOffDelay=250
Feb-01 11:16:37.100 [main] DEBUG nextflow.script.ScriptRunner - > Launching execution
Feb-01 11:16:38.253 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withName:PREP_INPUT` matches process PREP_INPUT
Feb-01 11:16:38.262 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: awsbatch
Feb-01 11:16:38.263 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'awsbatch'
Feb-01 11:16:38.266 [main] DEBUG nextflow.executor.Executor - [warm up] executor > awsbatch
Feb-01 11:16:38.279 [main] DEBUG nextflow.util.ThrottlingExecutor - Creating throttling executor with opts: nextflow.util.ThrottlingExecutor$Options(poolName:AWSBatch-executor, limiter:RateLimiter[stableRate=50.0qps], poolSize:80, maxPoolSize:80, queueSize:5000, maxRetries:10, keepAlive:1m, autoThrottle:true, errorBurstDelay:1s, rampUpInterval:100, rampUpFactor:1.2, rampUpMaxRate:1.7976931348623157E308, backOffFactor:2.0, backOffMinRate:0.0166666667, retryDelay:1s)
Feb-01 11:16:38.287 [main] DEBUG nextflow.util.ThrottlingExecutor - Creating throttling executor with opts: nextflow.util.ThrottlingExecutor$Options(poolName:AWSBatch-reaper, limiter:RateLimiter[stableRate=50.0qps], poolSize:80, maxPoolSize:80, queueSize:5000, maxRetries:10, keepAlive:1m, autoThrottle:true, errorBurstDelay:1s, rampUpInterval:100, rampUpFactor:1.2, rampUpMaxRate:1.7976931348623157E308, backOffFactor:2.0, backOffMinRate:0.0166666667, retryDelay:1s)
Feb-01 11:16:38.288 [main] DEBUG n.cloud.aws.batch.AwsBatchExecutor - Creating parallel monitor for executor 'awsbatch' > pollInterval=10s; dumpInterval=5m
Feb-01 11:16:38.328 [main] DEBUG nextflow.Global - Using AWS credentials defined in nextflow config file
Feb-01 11:16:38.386 [main] DEBUG n.cloud.aws.batch.AwsBatchExecutor - [AWS BATCH] Executor options=AwsOptions(cliPath:/home/ec2-user/miniconda/bin/aws, storageClass:null, storageEncryption:null, storageKmsKeyId:null, remoteBinDir:null, region:us-east-1, maxParallelTransfers:4, maxTransferAttempts:5, delayBetweenAttempts:10s, retryMode:standard, maxSpotAttempts:5, debug:null, fetchInstanceType:true, jobRole:null, logsGroup:null, volumes:[], shareIdentifier:null, schedulingPriority:0, s3Acl:null, awsCli:/home/ec2-user/miniconda/bin/aws --region us-east-1)
Feb-01 11:16:38.485 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withName:ORTHOFINDER` matches process ORTHOFINDER
Feb-01 11:16:38.486 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: awsbatch
Feb-01 11:16:38.486 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'awsbatch'
Feb-01 11:16:38.515 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withName:EGGNOGMAPPER` matches process EGGNOGMAPPER
Feb-01 11:16:38.516 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: awsbatch
Feb-01 11:16:38.516 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'awsbatch'
Feb-01 11:16:38.536 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withName:TREEGRAFTER` matches process TREEGRAFTER
Feb-01 11:16:38.538 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: awsbatch
Feb-01 11:16:38.539 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'awsbatch'
Feb-01 11:16:38.554 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withName:ORTHOLOGER` matches process ORTHOLOGER
Feb-01 11:16:38.556 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: awsbatch
Feb-01 11:16:38.556 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'awsbatch'
Feb-01 11:16:38.608 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withName:PANTHER_API` matches process PANTHER_API
Feb-01 11:16:38.609 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: awsbatch
Feb-01 11:16:38.609 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'awsbatch'
Feb-01 11:16:38.619 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: awsbatch
Feb-01 11:16:38.619 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'awsbatch'
Feb-01 11:16:38.624 [main] WARN  nextflow.extension.OperatorImpl - The operator `first` is useless when applied to a value channel which returns a single value by definition
Feb-01 11:16:38.630 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: awsbatch
Feb-01 11:16:38.630 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'awsbatch'
Feb-01 11:16:38.637 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withName:POST_PROC` matches process POST_PROC
Feb-01 11:16:38.639 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: awsbatch
Feb-01 11:16:38.639 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'awsbatch'
Feb-01 11:16:38.805 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: awsbatch
Feb-01 11:16:38.805 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'awsbatch'
Feb-01 11:16:38.808 [main] DEBUG nextflow.Session - Workflow process names [dsl2]: PREP_INPUT, PANTHER_API, ORTHOLOGER, TREEGRAFTER, ORTHOFINDER, TRANSDECODER_LONGORF, PULL_AWS, POST_PROC, CUSTOM_DUMPSOFTWAREVERSIONS, COLLECT_CHUNKS, EGGNOGMAPPER, STAGE_OUTS
Feb-01 11:16:39.069 [main] INFO  io.seqera.tower.plugin.TowerClient - Monitor the execution with Nextflow Tower using this URL: https://tower.nf/user/rgrindle/watch/1MTAXBDk6M1ee1
Feb-01 11:16:39.071 [main] DEBUG nextflow.Session - Igniting dataflow network (13)
Feb-01 11:16:39.078 [main] DEBUG nextflow.processor.TaskProcessor - Starting process > PREP_INPUT
Feb-01 11:16:39.078 [main] DEBUG nextflow.processor.TaskProcessor - Starting process > ORTHOFINDER
Feb-01 11:16:39.078 [main] DEBUG nextflow.processor.TaskProcessor - Starting process > EGGNOGMAPPER
Feb-01 11:16:39.079 [main] DEBUG nextflow.processor.TaskProcessor - Starting process > TREEGRAFTER
Feb-01 11:16:39.079 [main] DEBUG nextflow.processor.TaskProcessor - Starting process > ORTHOLOGER
Feb-01 11:16:39.079 [main] DEBUG nextflow.processor.TaskProcessor - Starting process > PANTHER_API
Feb-01 11:16:39.079 [main] DEBUG nextflow.processor.TaskProcessor - Starting process > COLLECT_CHUNKS
Feb-01 11:16:39.079 [main] DEBUG nextflow.processor.TaskProcessor - Starting process > STAGE_OUTS
Feb-01 11:16:39.079 [main] DEBUG nextflow.processor.TaskProcessor - Starting process > POST_PROC
Feb-01 11:16:39.079 [main] DEBUG nextflow.processor.TaskProcessor - Starting process > CUSTOM_DUMPSOFTWAREVERSIONS
Feb-01 11:16:39.079 [main] DEBUG nextflow.script.ScriptRunner - > Awaiting termination 
Feb-01 11:16:39.079 [main] DEBUG nextflow.Session - Session await
Feb-01 11:16:39.146 [Actor Thread 17] DEBUG nextflow.file.SortFileCollector - FileCollector temp dir not removed: null
Feb-01 11:16:39.711 [Actor Thread 12] INFO  nextflow.processor.TaskProcessor - [56/b50a5b] Cached process > PREP_INPUT (Staging input fastas for aws_test processes)
Feb-01 11:16:40.111 [Actor Thread 9] INFO  nextflow.processor.TaskProcessor - [ff/be7930] Cached process > ORTHOLOGER (Logging aws_test)
Feb-01 11:16:40.181 [Actor Thread 14] INFO  nextflow.processor.TaskProcessor - [44/828989] Cached process > EGGNOGMAPPER (Eggnogging aws_test using: shorter.fasta)
Feb-01 11:16:40.337 [Actor Thread 12] INFO  nextflow.processor.TaskProcessor - [98/d0475d] Cached process > TREEGRAFTER (Grafting aws_test using: shorter.fasta)
Feb-01 11:16:40.434 [Actor Thread 13] DEBUG n.splitter.AbstractTextSplitter - Splitter `Text` collector path: nextflow.splitter.TextFileCollector$CachePath(/mdibl-rgrindle/orthology_pipe/work_dirs/batch_test/93/a1b9d831030e484cb60e5b268460f5/chunk.out, null)
Feb-01 11:16:40.532 [Actor Thread 13] DEBUG nextflow.splitter.AbstractSplitter - Operator `Text` reusing cached chunks at path: /mdibl-rgrindle/orthology_pipe/work_dirs/batch_test/93/a1b9d831030e484cb60e5b268460f5/chunk.out
Feb-01 11:16:40.728 [Actor Thread 11] INFO  nextflow.processor.TaskProcessor - [76/61585c] Cached process > ORTHOFINDER (Orthofinding aws_test)
Feb-01 11:16:40.739 [Actor Thread 17] INFO  nextflow.processor.TaskProcessor - [e6/5a2f70] Cached process > PANTHER_API (Pulling gene ids from PantherDB)
Feb-01 11:16:40.743 [Actor Thread 15] INFO  nextflow.processor.TaskProcessor - [f2/940f3c] Cached process > PANTHER_API (Pulling gene ids from PantherDB)
Feb-01 11:16:40.788 [Actor Thread 9] INFO  nextflow.processor.TaskProcessor - [99/0e1ee5] Cached process > PANTHER_API (Pulling gene ids from PantherDB)
Feb-01 11:16:40.869 [Actor Thread 12] INFO  nextflow.processor.TaskProcessor - [1d/13d64f] Cached process > PANTHER_API (Pulling gene ids from PantherDB)
Feb-01 11:16:40.872 [Actor Thread 16] INFO  nextflow.processor.TaskProcessor - [21/86a053] Cached process > PANTHER_API (Pulling gene ids from PantherDB)
Feb-01 11:16:40.873 [Actor Thread 14] INFO  nextflow.processor.TaskProcessor - [bb/fe5b1c] Cached process > PANTHER_API (Pulling gene ids from PantherDB)
Feb-01 11:16:40.875 [Actor Thread 7] INFO  nextflow.processor.TaskProcessor - [9f/a11a17] Cached process > PANTHER_API (Pulling gene ids from PantherDB)
Feb-01 11:16:41.323 [Actor Thread 7] INFO  nextflow.processor.TaskProcessor - [0d/92d4ea] Cached process > COLLECT_CHUNKS (Combining Outputs)
Feb-01 11:16:41.804 [Actor Thread 10] INFO  nextflow.processor.TaskProcessor - [54/252c2f] Cached process > STAGE_OUTS (Staging orthology tool outputs...)
Feb-01 11:16:42.661 [AWSBatch-executor-1] DEBUG n.c.aws.batch.AwsBatchTaskHandler - [AWS BATCH] [AWS BATCH] Found job definition name=nf-quay-io-rgrindle-post_proc:4; container=quay.io/rgrindle/post_proc
Feb-01 11:16:42.781 [AWSBatch-executor-1] DEBUG n.c.aws.batch.AwsBatchTaskHandler - [AWS BATCH] submitted > job=5a374874-8371-4e0c-a558-8469ebfdd64e; work-dir=s3://mdibl-rgrindle/orthology_pipe/work_dirs/batch_test/b3/fc6f95d896e710fafe74f9d3c1a668
Feb-01 11:16:42.782 [AWSBatch-executor-1] INFO  nextflow.Session - [b3/fc6f95] Submitted process > POST_PROC (Processing orthology tool outputs...)
Feb-01 11:19:08.542 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 15; name: POST_PROC (Processing orthology tool outputs...); status: COMPLETED; exit: 0; error: -; workDir: s3://mdibl-rgrindle/orthology_pipe/work_dirs/batch_test/b3/fc6f95d896e710fafe74f9d3c1a668]
Feb-01 11:19:08.593 [main] DEBUG nextflow.Session - Session await > all processes finished
Feb-01 11:19:08.640 [main] DEBUG nextflow.Session - Session await > all barriers passed
Feb-01 11:19:08.650 [main] DEBUG nextflow.trace.WorkflowStatsObserver - Workflow completed > WorkflowStats[succeededCount=1; failedCount=0; ignoredCount=0; cachedCount=14; pendingCount=0; submittedCount=0; runningCount=0; retriesCount=0; abortedCount=0; succeedDuration=16.5s; failedDuration=0ms; cachedDuration=1h 21m 51s;loadCpus=0; loadMemory=0; peakRunning=1; peakCpus=6; peakMemory=36 GB; ]
Feb-01 11:19:09.233 [main] DEBUG nextflow.cache.CacheDB - Closing CacheDB done
Feb-01 11:19:09.233 [main] INFO  org.pf4j.AbstractPluginManager - Stop plugin 'nf-tower@1.5.12'
Feb-01 11:19:09.233 [main] DEBUG nextflow.plugin.BasePlugin - Plugin stopped nf-tower
Feb-01 11:19:09.233 [main] INFO  org.pf4j.AbstractPluginManager - Stop plugin 'nf-amazon@1.16.2'
Feb-01 11:19:09.233 [main] DEBUG nextflow.plugin.BasePlugin - Plugin stopped nf-amazon
Feb-01 11:19:09.270 [main] DEBUG nextflow.util.ThreadPoolManager - Thread pool 'FileTransfer' shutdown completed (hard=false)
Feb-01 11:19:09.272 [main] DEBUG nextflow.script.ScriptRunner - > Execution complete -- Goodbye
